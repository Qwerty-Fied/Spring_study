#12장 서비스 계층과 트랜잭션
서버에서 서비스 컨트롤러와 리파지터리 사이에 위치한 계층 == 메인 요리사 REST API에서 요청 받아오면 그것을 처리, 레포지토리에 요청해서 데이터를 받아와 가공 해서 다시 리파지터리에 보내준다.
서버의 핵심기능을 처리하는 순서를 총괄한다

왜씀?? == 유지보수의 편의성 -> 웨이터가 재료 손질까지 하면 음식 맛없을때 누구를 탓해야 할 지 모른다.
          코드의 재사용성   -> 레시피가 있으면 김치찌개를 집에서도 해먹을 수 있다.
          계층간 의존성 낮아짐 == 독단적 테스트가 용이해진
          트랜잭션 관리가 유용해짐 

기존 : ~Controller -> ~Repository
서비스 : ~Controller -> ~Servicre -> ~ Repository

일반적으로 업무처리는 트랜잭션 단위로 진행된다.
트랜잭션 - 모두 성공해야하는 일련의 과정 -> 재료 손질, 불 올리기, 양념 만들기 등등등

식당을 예로 드는데 메뉴까지 고르고 결제에 실패하면 시간 선택부터 다시해야한다
== 롤백 - 트랜잭션이 실패로 돌아갈 경우 진행 초기단계로 돌아가는것

서비스 계층을 만드는법
자바 클래스에 @Service 어노테이션을 붙혀서 만든다
이후 다른 클래스에서 객체를 만들고 @Autowired로 생성 객체를 가져와 연결하는 방식으로 서비스 객체를 선언할 수 있다

REST API의 메소드에 따라
@GetMapping - GET (조회)
@PostMapping - POST (생성)
@PatchMapping - PATCH (수정)
@DeleteMapping - DELETE (삭제)

@Transactional -> 메서드를 하나의 트랜잭션으로 묶어 메서드가 중간에 실행 실패하면 롤백으로 전 상태로 돌아갈 수 있다.
메서드를 1개의 트랜잭션으로 묶는다 == 완전 실행되거나 아예 튕기거나 둘중 하나만 한다. == 실패하면 거기서 오류를 발생시키는게 아니라 처음으로 돌아간다
